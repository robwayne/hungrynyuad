<template name="favorites">
  <div class="content">
    {{#if currentUser}}
      <section class="info-card">
        <div class="info-card-header"><span>Pick your favorite restaurants</span></div>
        <hr/>
        <div class="info-card-body">
          <p>Add your favorite restaurants and never miss out on any of their orders.</p>
        </div>
      </section>
      <section class="search-area">
        <div class="input-group icon-input-group">
          <span id="search-addon" class="input-group-addon"><i class="fa fa-search" aria-hidden="true"></i></span>
          <input type="text" aria-described-by="search-addon" class="favorites-search no-border" placeholder="Find your favorite restaurant...">
        </div>
      </section>
      {{#if Template.subscriptionsReady}}
        {{#if userHasFavoriteRestaurants}}
          <label class="section-label"> My Favorite Restaurants</label>
          <span class="badge badge-default">{{favoriteRestaurantCount}}</span>
        {{/if}}
        <section class="user-favorites-card">
          {{#transition in="bounceInLeft" out="bounceOutLeft"}}
            {{#each userFavoriteRestaurants}}
              <div class="restaurant-list-item bottom-border">
                <div class="restaurant-info">
                  <img src="{{banner_img_url}}" alt="{{name}} logo" class="restaurant-pic">
                  <p class="restaurant-name">{{name}}</p>
                </div>
                <div class="favorite-button">
                  <div class="favorite-btn fa {{#if favorited}} fa-star gold animate-spin {{else}} fa-star-o greyed animate-spin-reverse{{/if}} md-icon"></div>
                </div>
              </div>
            {{else}}
              <p class="alert alert-warning">You have no favorite restaurants, add some from the list below.</p>
            {{/each}}
          {{/transition}}
        </section>
        <label class="section-label"> More Restaurants</label>
        <section class="restaurant-list">
          {{#if searching}}
            <div class="spinner loader"></div>
          {{else}}
            {{#transition in="bounceInLeft" out="bounceOutLeft"}}
              {{#each restaurants}}
                <div class="restaurant-list-item">
                  <div class="restaurant-info">
                    <img src="{{banner_img_url}}" alt="{{name}} logo" class="restaurant-pic">
                    <p class="restaurant-name">{{name}}</p>
                  </div>
                  <div class="favorite-button">
                    {{#animate type="rubberBand" delay="10000"}}
                      <div class="favorite-btn fa {{#if favorited}} fa-star gold animate-spin {{else}} fa-star-o greyed animate-spin-reverse {{/if}} md-icon"></div>
                    {{/animate}}
                  </div>
                </div>
                {{else}}
                  <p class="alert alert-warning">No restaurants found to match '{{query}}'</p>
              {{/each}}
            {{/transition}}
          {{/if}}
        </section>
      {{else}}
        <div class="loading-container">
          <div class="spinner loader"></div>
          <p class="loading-text"> Loading...</p>
        </div>
      {{/if}}
    {{else}}
      <!-- Add template for displaying Please Login Screen -->
    {{/if}}
  </div>
</template>
